# Tree Command Reference

## üå≥ Comandos √öteis de Tree

### 1. Tree Completo (Auto-generated)

```bash
# Gerar diagrama completo
./scripts/generate-tree-diagram.sh

# Ver output
cat ARCHITECTURE-TREE.txt
less ARCHITECTURE-TREE.txt
```

**Output:** `ARCHITECTURE-TREE.txt` (~200 linhas)

---

### 2. Tree Customizados

#### Vis√£o Geral Compacta (2 n√≠veis)
```bash
tree -L 2 -I '.git|archive|result*' --dirsfirst
```

#### Apenas Diret√≥rios
```bash
tree -d -L 3 -I '.git|archive|result*' --dirsfirst
```

#### Apenas .nix files
```bash
tree -P '*.nix' -I '.git|archive' --prune
```

#### Apenas .md files (Documenta√ß√£o)
```bash
tree -P '*.md' -I '.git|archive' --prune
```

#### Com Tamanhos
```bash
tree -h -L 3 -I '.git|archive|result*' --dirsfirst
```

#### Com Permiss√µes
```bash
tree -p -L 2 -I '.git|archive'
```

#### Com Datas
```bash
tree -D -L 2 -I '.git|archive' --dirsfirst
```

#### Apenas Execut√°veis
```bash
tree -P '*.sh' -I '.git|archive' --prune
```

---

### 3. Tree por Categoria

#### M√≥dulos
```bash
tree modules/ -L 3 --dirsfirst
```

#### Hosts
```bash
tree hosts/ -L 4 --dirsfirst
```

#### Documenta√ß√£o
```bash
tree docs/ -L 2 --dirsfirst
```

#### Scripts
```bash
tree scripts/ -L 2
```

#### Secrets (safe - sem conte√∫do)
```bash
tree secrets/ -L 1
```

---

### 4. Tree com Filtros Avan√ßados

#### Excluir m√∫ltiplos padr√µes
```bash
tree -I '.git|archive|result*|*.qcow2|*.iso|node_modules' -L 3
```

#### Mostrar apenas modificados hoje
```bash
tree -D -L 3 -I '.git|archive' | grep "$(date +%b\ %d)"
```

#### Contar arquivos por tipo
```bash
tree -P '*.nix' --prune -i | grep -c '\.nix'
tree -P '*.md' --prune -i | grep -c '\.md'
tree -P '*.sh' --prune -i | grep -c '\.sh'
```

---

### 5. Tree para Export

#### ASCII puro (para commit messages)
```bash
tree -L 2 --charset ascii -I '.git|archive' --dirsfirst
```

#### JSON output (para scripts)
```bash
tree -J -L 2 -I '.git|archive' > tree.json
```

#### XML output
```bash
tree -X -L 2 -I '.git|archive' > tree.xml
```

#### HTML output
```bash
tree -H . -L 2 -I '.git|archive' -o tree.html
```

---

### 6. Tree com Estat√≠sticas

#### Completo com estat√≠sticas
```bash
tree -a --dirsfirst -I '.git' | tee tree-full.txt
```

#### Resumo de tamanhos
```bash
tree -h -d -L 2 --du | grep '\['
```

---

### 7. Tree Gigante (M√°ximo Detalhe)

```bash
tree -a \
  -I '.git|.direnv|result*' \
  --charset ascii \
  -F \
  --dirsfirst \
  -h \
  -p \
  -D \
  -L 10 \
  --du \
  | tee TREE-GIGANTE.txt
```

**Flags:**
- `-a` : Mostra arquivos ocultos
- `-I` : Ignora padr√µes
- `-F` : Adiciona / para dirs, * para execut√°veis
- `--dirsfirst` : Diret√≥rios primeiro
- `-h` : Tamanhos human-readable
- `-p` : Permiss√µes
- `-D` : Data modifica√ß√£o
- `-L 10` : Profundidade 10 n√≠veis
- `--du` : Disk usage por diret√≥rio

---

### 8. Tree por Tamanho

#### Maiores diret√≥rios
```bash
tree -d --du -L 2 -I '.git|archive' | sort -k1 -hr | head -20
```

#### Maiores arquivos .nix
```bash
tree -h -P '*.nix' --prune -I 'archive' | grep -v '/$' | sort -k1 -hr
```

---

### 9. Tree Interativo

#### Com pagina√ß√£o
```bash
tree -L 3 -I '.git|archive' | less
```

#### Com cores
```bash
tree -C -L 3 -I '.git|archive' | less -R
```

---

### 10. Tree para Documenta√ß√£o

#### Markdown format (para README)
```bash
tree -L 2 --dirsfirst -I '.git|archive' --charset ascii | sed 's/^/    /'
```

#### Com anota√ß√µes (coment√°rios inline)
```bash
tree -L 2 -I '.git|archive' --dirsfirst | \
  sed 's/modules\/applications/modules\/applications  # User apps/' | \
  sed 's/modules\/security/modules\/security       # Security hardening/'
```

---

## üìä Estat√≠sticas R√°pidas

```bash
# Total de arquivos
find . -type f -not -path '*/\.*' -not -path '*/archive/*' | wc -l

# Total de diret√≥rios
find . -type d -not -path '*/\.*' -not -path '*/archive/*' | wc -l

# .nix files
find . -name '*.nix' -not -path '*/archive/*' | wc -l

# .md files
find . -name '*.md' -not -path '*/archive/*' | wc -l

# .sh files
find . -name '*.sh' -not -path '*/archive/*' | wc -l

# Tamanho total
du -sh . --exclude='.git' --exclude='archive'

# Tamanho por categoria
du -sh modules/* | sort -hr
du -sh hosts/* | sort -hr
du -sh docs/* | sort -hr
```

---

## üé® Exemplos de Uso

### Para commit message
```bash
tree -L 2 --charset ascii -I '.git|archive' --dirsfirst > /tmp/tree.txt
git commit -m "$(cat /tmp/tree.txt)"
```

### Para documenta√ß√£o
```bash
echo '```' > /tmp/tree.md
tree -L 3 -I '.git|archive' --dirsfirst >> /tmp/tree.md
echo '```' >> /tmp/tree.md
cat /tmp/tree.md >> docs/STRUCTURE.md
```

### Para an√°lise de tamanho
```bash
tree -d --du -L 2 -I '.git' | grep '\[' | sort -k1 -hr
```

---

## üí° Tips & Tricks

### Alias √∫teis (adicionar ao shell)
```bash
alias tree-nix='tree -P "*.nix" -I ".git|archive" --prune'
alias tree-md='tree -P "*.md" -I ".git|archive" --prune'
alias tree-compact='tree -L 2 -I ".git|archive" --dirsfirst'
alias tree-modules='tree modules/ -L 3 --dirsfirst'
alias tree-hosts='tree hosts/ -L 4 --dirsfirst'
```

### Grep no tree output
```bash
# Encontrar todos os m√≥dulos de security
tree modules/ | grep -i security

# Encontrar configs de docker
tree | grep -i docker
```

### Pipe para clipboard (Linux)
```bash
tree -L 3 -I '.git|archive' | xclip -selection clipboard
```

---

## üìù Template para ARCHITECTURE-BLUEPRINT.md

Use o output do tree para preencher:

```bash
# Gerar estrutura
./scripts/generate-tree-diagram.sh

# Abrir blueprint para anota√ß√µes
vim ARCHITECTURE-BLUEPRINT.md

# Ou usar tree direto
tree modules/ -L 2 --dirsfirst | sed 's/^/‚îÇ   /' >> ARCHITECTURE-BLUEPRINT.md
```

---

## üîç Compara√ß√£o de Outputs

| Comando | Linhas | Detalhes | Uso |
|---------|--------|----------|-----|
| `tree -L 1` | ~20 | M√≠nimo | Overview r√°pido |
| `tree -L 2` | ~100 | M√©dio | Commit messages |
| `tree -L 3` | ~300 | Alto | Documenta√ß√£o |
| `generate-tree-diagram.sh` | ~200 | Custom | Auto-generated |
| `tree -L 10` | ~1000+ | M√°ximo | An√°lise completa |

---

**Recomenda√ß√£o:** Use `./scripts/generate-tree-diagram.sh` para output padronizado e consistente.

Para customiza√ß√£o, use os comandos manuais acima.
