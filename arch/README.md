# Architecture Reports

This directory contains automated architecture analysis reports for the NixOS configuration.

## üìã Contents

### Current Reports

- **ARCHITECTURE-TREE.txt** - Visual tree diagram (UTF-8 box-drawing)
- **ARCHITECTURE-REPORT.txt** - Comprehensive text report
- **ARCHITECTURE-REPORT.md** - GitHub-flavored Markdown report
- **ARCHITECTURE-REPORT.json** - Machine-readable JSON (for CI/CD)

### Snapshots

The `snapshots/` directory contains versioned historical reports for tracking architecture evolution over time.

## üîÑ Regeneration

To regenerate all reports:

```bash
bash scripts/generate-architecture-tree.sh
```

This will:
1. Analyze the entire NixOS configuration
2. Calculate health scores (overall, security, documentation)
3. Detect orphaned modules
4. Generate recommendations
5. Create reports in multiple formats
6. Save a versioned snapshot

## üìä Report Contents

Each report includes:

- **Executive Summary** - Repository overview and key metrics
- **Module Breakdown** - Analysis by category with visual bar charts
- **Security Analysis** - Security score and configuration
- **Health Score** - Overall architecture health metrics
- **Recommendations** - Actionable improvements
- **Git Statistics** - Commit history, contributors, repo age

## üéØ Health Metrics

The analysis calculates several key metrics:

- **Overall Health** (0-100) - Weighted average of all components
- **Security Score** (0-100) - Security module coverage and configuration
- **Documentation Coverage** (0-100%) - Percentage of modules with inline docs
- **Orphaned Modules** - Count of potentially unused modules

## üì¶ JSON Format

The JSON report is designed for CI/CD integration:

```bash
# Get overall health score
jq '.health.overall' arch/ARCHITECTURE-REPORT.json

# Get security score
jq '.health.security' arch/ARCHITECTURE-REPORT.json

# List modules by category
jq '.modules.by_category' arch/ARCHITECTURE-REPORT.json
```

## üîç Viewing Reports

```bash
# View text report in terminal
cat arch/ARCHITECTURE-REPORT.txt

# View with pager
less arch/ARCHITECTURE-REPORT.md

# View tree diagram
cat arch/ARCHITECTURE-TREE.txt

# Parse JSON
jq '.' arch/ARCHITECTURE-REPORT.json
```

## üìÖ Version History

Reports are automatically timestamped and versioned in the `snapshots/` directory, allowing you to track architecture changes over time.

## ‚öôÔ∏è Configuration

The analysis can be customized with environment variables:

```bash
# Disable advanced metrics (faster, tree only)
ENABLE_METRICS=false bash scripts/generate-architecture-tree.sh

# Change tree depth
MAX_DEPTH=3 bash scripts/generate-architecture-tree.sh

# Show hidden files
SHOW_HIDDEN=true bash scripts/generate-architecture-tree.sh
```

---

*Reports generated by NixOS Architecture Analysis Tool v2.0.0*
